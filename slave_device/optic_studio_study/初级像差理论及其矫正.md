# 初级像差理论及其矫正
## 相关概念
* 像差
```
光学系统成像不完善程度的描述

光学系统初级相差包括：
    球差
    慧差
    像散
    场曲
    畸变
    色差
```
## 球差
球差也叫做球面像差，是指轴上物点发出的光束通过球面透镜时，透镜不同孔径区域的光束最后聚集在光轴的不同位置，在相面上形成的圆形弥散
### 模拟
1. 光阑面，后面插入两个后续面
2. 光阑面，厚度：20
3. 面2，厚度：10，曲率半径：100，材料：BK7
4. 系统选项-系统孔径，孔径类型：入瞳直径，孔径值：50
5. 面3，曲率半径：F数+1.5，厚度：边缘光线高度
6. 点击，分析：3D视图、像差分析-光线像差图、光线迹点-标准点列图-光线密度20、波前-波前图、波前-干涉图-显示为等高线
### 矫正方法
#### 原理
凹凸透镜补偿，凸面提供正球差，凹面提供负球差。

增加凹凸面，从而减少球差。

在不增加透镜情况下使用Conic非球面消除球差。
#### opticstudio 操作
##### 第一步优化
1. 面3，圆锥系数：变量
2. 点击，优化-优化向导，成像质量：点列图，X权重：0，Y权重：0，光瞳采样：高斯求积，环：4，点击，应用，关闭
3. 点击，优化-执行优化-开始，点击，退出
##### 第二步优化
1. 面2，曲率半径：变量
2. 点击，优化-优化向导，成像质量：点列图，X权重：0，Y权重：0，光瞳采样：高斯求积，环：4，点击，应用，关闭
3. 点击，优化-执行优化-开始，点击，退出

## 慧差
慧差是指轴外物点（或称轴外视场点）所发出的锥形光束通过光学系统成像后，在理想像面不能成完美的像点，而是形成拖着尾巴的如彗星形状的光斑，因此光学系统的这种像差成为慧差。
### 模拟
1. 系统选项-系统孔径，孔径类型：入瞳直径，孔径值：50
2. 系统选项-视场-打开视场数据编辑器，点击，左上角箭头，类型：角度，Y角度：10，权重：1，关闭
3. 系统选项-波长，默认设置就行
4. 光阑面，表面类型：近轴面，焦距：100
5. 光阑面，后面插入一个后续面
6. 面2，表面类型：Zernike Fringe相位
7. 光阑面，材料：BK7
8. 面2，厚度：100，归一化半径：25，最大项数：9，泽尼克7：0.333，泽尼克8：100
9. 点击，分析：3D视图、光线迹点-标准点列图
### 矫正方法
#### 原理
慧差是由外视场物点成像形成的，可以通过调整视场光阑的方法来减小慧差，即调整光阑与镜头的相对位置来优化慧差；还可以使用对称结构系统来矫正慧差。

## 像散
像散是指轴外物点发出的锥形光束通过光学系统聚焦后，光斑在像面上子午方向与弧矢方向的不一致性，即轴外视场的光束通过光瞳后，在子午方向和弧矢方向光程不相等，两个方向光斑分离形成弥散斑

子午面：Y-O-Z面，弧矢面：X-O-Z面
### 模拟
1. 点击，左上角打开图标-打开"Samples\Sequential\Objectives\Cooke 40 degree field.zmx"
2. 叉掉下方没用的视图
3. 点击，分析：3D视图、光线迹点-标准点列图
4. 3D视图，设置，视场：2，光线样式：Y扇形图，最上方黄边左侧：Y-Z
5. 3D视图，设置，视场：2，光线样式：X扇形图，最上方黄边左侧：X-Z
6. 点击，分析：光线迹点-离焦点列图
7. 离焦点列图，设置，离焦范围：150
### 矫正方法
#### 原理
由于像散是轴外视场物点成像的不完美性造成的，可以通过调节视场光阑的位置来减小像散影响；还可以使用对称结构系统来矫正像散；也可以使用远离视场光阑的非球面透镜矫正像散。

在Zemax中可以使用ASTI进行优化
#### opticstudio 操作
1. 点击，优化-优化向导-当前操作数（1），操作数：ASTI
## 场曲
场曲也叫“像场弯曲”，是指平面物体透过透镜系统后，所有平面物点聚焦后的像面不与理想像面重合，而是呈现出一个弯曲的像面。
### 模拟
1. 系统选项-系统孔径，孔径类型：入瞳直径，孔径值：20
2. 系统选项-视场-打开视场数据编辑器，点击，左上角箭头，类型：角度，Y角度：10，再插入两个，一共三个，视场1、2、3的Y角度：0、14、20，关闭
3. 光阑面，后面插入一个后续面
4. 光阑面，厚度：10，材料：H-K9L
5. 面2，曲率半径：F数+5，厚度：边缘光线高度
6. 点击，分析：3D视图、光线迹点-标准点列图、相差分析-场曲/畸变、拓展图像分析-图像模拟
7. 图像模拟，设置，导入文件：Demo picture - 640 x 480.bmp
### 矫正方法
#### 原理
场曲是由于视场因素造成的，故可通过调节视场光阑的位置来减小场曲；也可使用对称结构来有效地减小场曲；另外，使用匹兹万镜头形式，即将最后透镜面设计为凹透镜也可校正场曲。
#### opticstudio 操作
##### 方案1——场曲优化：（视场光阑）
1. 光阑面，前面插入一个表面
2. 面1，设置，使此表面为光阑：勾选
3. 面1，厚度：变量
4. 面3，厚度：变量
5. 点击，优化-优化向导，成像质量：点列图，X权重：0，Y权重：0，光瞳采样：高斯求积，点击，应用，关闭
6. 点击，优化-执行优化-开始，点击，退出
7. 3D视图，设置，起始面：1
##### 方案2——场曲优化：（对称结构）
1. 光阑面，前面插入两个表面，后面插入一个后续面
2. 面1，曲率半径：50，厚度：10，材料：H-K9L
3. 面2，曲率半径：110，厚度：25
4. 面3（光阑面），曲率半径：无限，厚度：25
5. 面4，曲率半径：-125，厚度：10，材料：H-K9L
6. 面5，曲率半径：-50，厚度：60
## 畸变
畸变指物体通过镜头成像时，实际像面与理想像面之间产生形变，即物体成像后物体的像并非物体的等比缩放，由于局部放大率的不等而使物体的像产生变形。畸变分为两种：正畸变和负畸变，即枕形畸变和桶形畸变。
### 模拟
1. 点击，左上角打开图标-打开"Samples\Sequential\Objectives\Wide angle lens 100 degree field.zmx"
2. 点击，分析：3D视图、像差分析——场曲/畸变、像差分析——网格畸变、拓展图像分析——图像模拟
3. 图像模拟，设置，显示为：仿真图 or 光源位图
### 矫正方法
#### 原理
畸变是由于光线系统不同物点成像后放大率不同造成的像面形变，它与视场紧密相关，故不同视场光阑位置得到的畸变贡献不一致，通常对称结构贡献的畸变最小，如双高斯或库克三片对称结构
## 色差
色差指颜色像差，是由于同种材料对不同波长的光有不同的折射率，便造成了多波长的光束通过透镜后传播方向分离，也就是色散现象，不同波长的光汇聚于不同位置，就形成了一定大小的色斑。色差分为两种：轴向色差和垂轴色差。

轴向色差也叫球色差或位置色差，是指不同波长的光束通过透镜后焦点位于沿轴的不同位置

垂轴色差也叫倍率色差，是指轴外视场不同波长的光束通过透镜聚焦后在像面上高度各不相同，即每个波长成像后的放大率不同
### 模拟
1. 系统选项-系统孔径，孔径类型：入瞳直径，孔径值：20
2. 系统选项-视场-打开视场数据编辑器，再插入两个，一共三个，视场1、2、3的Y角度：0、-6、2，关闭
3. 系统选项-波长-双击设置，小数位：4，关闭
4. 系统选项-波长-设置展开折叠，可选：F，d，C（可见）
5. 系统选项-波长-双击设置，选中三个波长数据，波长1、2、3分别为0.4861、0.5876、0.5563，关闭
6. 光阑面，后面插入一个后续面
7. 光阑面，曲率半径：100，厚度：10，材料：BK7
8. 面2，曲率半径：1000，厚度：205
9. 点击，分析：3D视图，光线迹点——光线像差图
10. 光线像差图，设置，视场：3
11. 点击，分析：光线迹点——标准点列图，拓展图像分析——图像模拟，像差分析——轴向色差/垂轴色差
### 矫正方法
#### 原理
对于色差的校正，通常使用双胶合消色差透镜或三胶合复消色差透镜，在光学设计中，我们可以使用冕牌玻璃和火石玻璃材料的组合来对色差进行补偿。另外，对于高精度消色差要求的系统，或色差较大使用普通玻璃很难消除的情况，常常使用二元衍射光学元件进行色差消除，使用衍射的方法可在镜片较少、材料有限的情况下较高水平地消除色差。
#### opticstudio 操作
1. 光阑面，表面类型：二元面2，材料：求解类型=替代，曲率半径：变量，最大项数：10，归一化半径：10，p^2系数：变量
2. 面2，厚度：变量，曲率半径：F数+5
3. 点击，分析：光线迹点——光线像差图
4. 光线像差图，视场：3
5. 点击，分析：拓展图像分析——图像模拟
6. 点击，优化-优化向导，成像质量：波前，光瞳采样：高斯求积，起始行：1，点击，应用，关闭
7. 点击，优化-执行优化-开始，点击，退出